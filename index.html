<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Plume Infinie â€” BibliothÃ¨que IA</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Inter:wght@400;600&display=swap" rel="stylesheet">

<style>
:root{
--bg:#fdfdfb;
--text:#1e293b;
--card:#ffffff;
--accent:#c7a14a;
}

body.dark{
--bg:#0b1220;
--text:#e5e7eb;
--card:#111827;
}

body{
margin:0;
font-family:Inter,sans-serif;
background:var(--bg);
color:var(--text);
transition:.3s;
}

header{
padding:20px;
text-align:center;
font-family:"Playfair Display",serif;
}

section{
max-width:1000px;
margin:auto;
padding:30px;
}

.book{
background:var(--card);
padding:20px;
border-radius:14px;
box-shadow:0 8px 20px rgba(0,0,0,.08);
margin-bottom:20px;
}

.book button{
margin-top:10px;
padding:8px 18px;
border:none;
border-radius:20px;
background:var(--accent);
color:white;
cursor:pointer;
}

#reader{
position:fixed;
inset:0;
background:var(--bg);
display:none;
flex-direction:column;
}

.reader-top{
display:flex;
justify-content:space-between;
padding:15px 20px;
font-size:14px;
}

.settings{
display:flex;
gap:10px;
}

.settings button{
border:none;
background:none;
cursor:pointer;
font-size:18px;
color:var(--text);
}

.reader-content{
flex:1;
overflow-y:auto;
padding:40px 20px;
display:flex;
justify-content:center;
}

#page{
max-width:700px;
line-height:1.9;
font-size:18px;
white-space:pre-wrap;
}

.reader-controls{
display:flex;
justify-content:center;
gap:15px;
padding:15px;
}

.reader-controls button{
padding:8px 18px;
border:none;
border-radius:20px;
background:var(--accent);
color:white;
cursor:pointer;
}

.progress{
height:4px;
background:#ddd;
}

.progress span{
display:block;
height:100%;
background:var(--accent);
width:0%;
}

input, textarea, select{
width:100%;
padding:10px;
border-radius:10px;
border:1px solid #ccc;
margin-top:10px;
}
</style>
</head>

<body>

<header>
<h1>Plume Infinie</h1>
<p>BibliothÃ¨que & CrÃ©ation de romans par IA</p>
</header>

<section>
<h2>ðŸ“š BibliothÃ¨que</h2>
<div id="library"></div>
</section>

<section>
<h2>ðŸ¤– Concepteur de livre par IA</h2>

<input id="aiTitle" placeholder="Titre du livre">
<select id="aiGenre">
<option>Thriller psychologique</option>
<option>Drame</option>
<option>Romance sombre</option>
<option>Policier</option>
</select>
<input id="aiChapters" type="number" placeholder="Nombre de chapitres (ex: 20)">
<button onclick="generateBook()">CrÃ©er le livre</button>
</section>

<div id="reader">
<div class="progress"><span id="progress"></span></div>

<div class="reader-top">
<span id="readerTitle"></span>
<div class="settings">
<button onclick="toggleTheme()">ðŸŒ™</button>
<button onclick="changeFont(1)">A+</button>
<button onclick="changeFont(-1)">Aâˆ’</button>
<span onclick="closeReader()" style="cursor:pointer">âœ•</span>
</div>
</div>

<div class="reader-content">
<div id="page"></div>
</div>

<div class="reader-controls">
<button onclick="prevChapter()">â—€ Chapitre</button>
<button onclick="nextChapter()">Chapitre â–¶</button>
</div>
</div>

<script>
let books = [
{
title:"DerriÃ¨re les portes closes",
author:"Plume Infinie",
chapters:[
{
title:"Chapitre 1 â€” La maison parfaite",
text:`Quand jâ€™ai acceptÃ© ce travail, je pensais avoir trouvÃ© une chance.
La maison Ã©tait trop propre. Trop silencieuse.
Et surtoutâ€¦ trop parfaite.

Madame Delcourt souriait toujours.
Mais ses yeux ne souriaient jamais.`
},
{
title:"Chapitre 2 â€” Les rÃ¨gles",
text:`Il y avait des rÃ¨gles.
Ne jamais entrer dans la chambre du fond.
Ne jamais rÃ©pondre au tÃ©lÃ©phone.
Ne jamais poser de questions.

Jâ€™ai signÃ© sans lire.
Câ€™est lÃ  que tout a commencÃ©.`
}
]
}
];

let currentBook=null;
let currentChapter=0;
let fontSize=18;

function renderLibrary(){
library.innerHTML="";
books.forEach((b,i)=>{
library.innerHTML+=`
<div class="book">
<h3>${b.title}</h3>
<p>${b.author}</p>
<button onclick="openBook(${i})">Lire</button>
</div>`;
});
}

function openBook(i){
currentBook=books[i];
currentChapter=parseInt(localStorage.getItem(currentBook.title))||0;
reader.style.display="flex";
readerTitle.innerText=currentBook.title;
renderChapter();
}

function renderChapter(){
const c=currentBook.chapters[currentChapter];
page.style.fontSize=fontSize+"px";
page.innerHTML=`<h2>${c.title}</h2><p>${c.text.replace(/\n/g,"<br><br>")}</p>`;
progress.style.width=((currentChapter+1)/currentBook.chapters.length)*100+"%";
localStorage.setItem(currentBook.title,currentChapter);
}

function nextChapter(){
if(currentChapter<currentBook.chapters.length-1){
currentChapter++;renderChapter();
}
}

function prevChapter(){
if(currentChapter>0){
currentChapter--;renderChapter();
}
}

function closeReader(){reader.style.display="none";}
function toggleTheme(){document.body.classList.toggle("dark");}
function changeFont(v){
fontSize=Math.min(26,Math.max(14,fontSize+v));
renderChapter();
}

/* ===== CONCEPTEUR IA (LOGIQUE SIMULÃ‰E) ===== */
function generateBook(){
const title=aiTitle.value||"Roman IA";
const genre=aiGenre.value;
const count=parseInt(aiChapters.value)||10;

let chapters=[];
for(let i=1;i<=count;i++){
chapters.push({
title:`Chapitre ${i}`,
text:`Ce chapitre appartient Ã  un roman de genre ${genre}.

Chaque mot a Ã©tÃ© gÃ©nÃ©rÃ© pour crÃ©er une tension progressive.
Rien nâ€™est laissÃ© au hasard.

Plus vous avancez, plus la vÃ©ritÃ© se fissure.`
});
}

books.push({
title:title,
author:"CrÃ©Ã© par lâ€™IA",
chapters:chapters
});

renderLibrary();
alert("ðŸ“˜ Livre gÃ©nÃ©rÃ© et ajoutÃ© Ã  la bibliothÃ¨que");
}

renderLibrary();
</script>

</body>
</html>
